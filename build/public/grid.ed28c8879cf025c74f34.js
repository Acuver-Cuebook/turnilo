(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{672:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u}));var a=n(24),r=n(11),i=function(e){return e.data[0]},s=function(e){return e[r.l]},c=function(e){return e.data},l=Object(a.c)(s,c),o=Object(a.c)(i,s),u=Object(a.c)(o,c)},674:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return o})),n.d(t,"h",(function(){return u}));var a=38,r=25,i=30,s=10,c=100,l=300,o=130,u=10},684:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(37),r=n(0),i=n.n(r),s=n(674),c=function(e){var t=e.renderRow,n=e.hoveredRowDatum,r=e.rowsData,c=e.visibleRowsIndexRange,l=e.highlightedRowIndex,o=Object(a.a)(c,2),u=o[0],d=o[1],m=r.slice(u,d);return i.a.createElement(i.a.Fragment,null,m.map((function(e,a){var r=u+a,i=r*s.e,c=r===l;return t({highlight:c||e===n,dimmed:!c&&null!==l,top:i,index:r,datum:e})})))}},686:function(e,t,n){"use strict";function a(e){var t=e.series.series.count();return e.hasComparison()?3*t:t}n.d(t,"a",(function(){return a}))},688:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n.n(a),i=n(8),s=n(18),c=n(381),l=function(e){var t=e.direction;return r.a.createElement(s.a,{svg:c,className:Object(i.b)("sort-arrow",t)})}},699:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n.n(a),i=n(8),s=function(e){var t=e.className,n=e.highlight,a=e.dimmed,s=e.children,c=e.style;return r.a.createElement("div",{className:Object(i.b)("split-value",t,{dimmed:a,highlight:n}),style:c},s)}},700:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a),i=function(e){var t=e.children;return r.a.createElement("div",{className:"corner"},t)}},704:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a);function i(e,t){return function(n){return r.a.createElement(e,Object.assign({},n,t))}}},705:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(34),r=n(120);function i(e,t){return e.getConcreteSeries().groupBy((function(e){return e.reactKey()})).map((function(e){return e.first()})).toMap().map((function(e){var n=t.map((function(t){return e.selectValue(t)}));return r.k().domain(r.b([0].concat(Object(a.a)(n)))).range([0,100])}))}},706:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(674);function r(e,t,n){return[Math.max(0,Math.floor(n/a.e)),Math.min(e,Math.ceil((n+t)/a.e))]}},709:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(0),r=n.n(a),i=n(684),s=n(8),c=n(25),l=n(676),o=function(e){var t=e.highlight,n=e.width;return r.a.createElement("div",{className:"measure-background-container"},r.a.createElement("div",{className:Object(s.b)("measure-background",{highlight:t}),style:{width:n+"%"}}))},u=function(e){var t=e.width,n=e.value,a=e.children;return r.a.createElement("div",{className:"measure-cell",style:{width:t}},a,r.a.createElement("div",{className:"measure-label"},n))},d=function(e){var t=e.series,n=e.datum,a=e.barScale,i=e.highlight,s=e.showPrevious,d=e.cellWidth,m=t.selectValue(n),h=r.a.createElement(u,{key:t.reactKey(),width:d,value:t.formatValue(n)},a&&r.a.createElement(o,{highlight:i,width:a(m)}));if(!s)return h;var f=t.selectValue(n,c.b.PREVIOUS);return r.a.createElement(r.a.Fragment,null,h,r.a.createElement(u,{key:t.reactKey(c.b.PREVIOUS),width:d,value:t.formatValue(n,c.b.PREVIOUS)},a&&r.a.createElement(o,{highlight:i,width:a(f)})),r.a.createElement(u,{width:d,key:t.reactKey(c.b.DELTA),value:r.a.createElement(l.a,{currentValue:m,previousValue:f,lowerIsBetter:t.measure.lowerIsBetter,formatter:t.formatter()})}))},m=function(e){var t=e.datum,n=e.showBar,a=e.scales,i=e.cellWidth,c=e.highlight,l=e.dimmed,o=e.style,u=e.essence,m=u.getConcreteSeries().toArray();return r.a.createElement("div",{className:Object(s.b)("measure-row",{highlight:c,dimmed:l}),style:o},m.map((function(e){return r.a.createElement(d,{key:e.reactKey(),series:e,datum:t,highlight:c,barScale:n?a.get(e.reactKey()):null,cellWidth:i,showPrevious:u.hasComparison()})})))},h=function(e){var t=e.rowWidth,n=e.showBarPredicate,a=e.essence,s=e.cellWidth,c=e.hoverRow,l=e.scales,o=e.data,u=e.visibleRowsIndexRange,d=e.highlightedRowIndex;return r.a.createElement(i.a,{visibleRowsIndexRange:u,highlightedRowIndex:d,hoveredRowDatum:c,rowsData:o,renderRow:function(e){var i=e.index,c=e.top,o=e.datum,u=e.highlight,d=e.dimmed,h={top:c,width:t},f=n(o);return r.a.createElement(m,{key:"row_".concat(i),essence:a,highlight:u,dimmed:d,style:h,datum:o,cellWidth:s,showBar:f,scales:l})}})}},711:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(0),r=n.n(a),i=n(25),s=n(19),c=n(8),l=n(688),o=function(e){var t=e.sort,n=e.width,a=e.title,i=e.className,s=null!==t;return r.a.createElement("div",{className:Object(c.b)("measure-header-cell",i,{sorted:s}),style:{width:n}},r.a.createElement("div",{className:"title-wrap"},a),t&&r.a.createElement(l.a,{direction:t}))};function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.b.CURRENT,a=e instanceof s.b&&e.reference===t.definition.key()&&e.period===n;return a?e.direction:null}var d=function(e){var t=e.cellWidth,n=e.series,a=e.sort,s=e.showPrevious;return r.a.createElement(r.a.Fragment,null,n.map((function(e){var n=r.a.createElement(o,{key:e.reactKey(),width:t,title:e.title(),sort:u(a,e)});return s?r.a.createElement(r.a.Fragment,{key:e.reactKey()},n,r.a.createElement(o,{key:e.reactKey(i.b.PREVIOUS),width:t,title:e.title(i.b.PREVIOUS),sort:u(a,e,i.b.PREVIOUS)}),r.a.createElement(o,{className:"measure-delta",key:e.reactKey(i.b.DELTA),width:t,title:"Difference",sort:u(a,e,i.b.DELTA)})):n})))}},716:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n.n(a),i=n(674),s=n(684),c=n(699),l=function(e){var t=e.splitLabel,n=e.data,a=e.highlightedRowIndex,l=e.hoverRow,o=e.visibleRowsIndexRange,u=e.segmentWidth;return r.a.createElement("div",{className:"flattened-splits-rows"},r.a.createElement(s.a,{visibleRowsIndexRange:o,highlightedRowIndex:a,rowsData:n,hoveredRowDatum:l,renderRow:function(e){var n=e.index,a=e.top,s=e.datum,l=e.highlight,o=e.dimmed,d={width:u-i.g,top:a};return r.a.createElement(c.a,{key:"splits_".concat(n),className:"flattened-splits-row",style:d,dimmed:o,highlight:l},r.a.createElement(t,{datum:s}))}}))}},717:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),i=n(13),s=n(19),c=n(700),l=n(688);var o=function(e){var t=e.sort,n=e.splits,a=e.dataCube;return r.a.createElement(c.a,null,r.a.createElement("div",{className:"header-split-columns"},n.splits.toArray().map((function(e){var n=e.reference,c=Object(i.d)(a.dimensions,n).title,o=function(e,t){return t instanceof s.a&&e.reference===t.reference?t.direction:null}(e,t);return r.a.createElement("div",{className:"header-split-column",key:n},r.a.createElement("div",{className:"header-split-column-title"},c),o&&r.a.createElement("div",{className:"header-split-column-sort-icon"},r.a.createElement(l.a,{direction:o})))}))))}},719:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),r=n.n(a),i=n(121),s=function(e){var t=e.splits,n=e.datum,a=e.timezone;return r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.reference,s=e.selectValue(n);return r.a.createElement("div",{key:t,className:"flattened-split-value"},Object(i.b)(s,a))})))}},770:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ae}));var a=n(3),r=n(4),i=n(2),s=n(6),c=n(7),l=n(1),o=n(0),u=n.n(o),d=n(674),m=n(704),h=n(677),f=n(71),p=n(19),v=n(686),g=n(13),b=n(25),y=n(14);function O(e,t,n,a){var r,i=t.series.series,s=e-n,c=Math.floor(s/a);if(t.hasComparison()){var l=Object(y.i)(c,3),o=i.get(l);return o?{element:"series",series:o,period:(r=c,[b.b.CURRENT,b.b.PREVIOUS,b.b.DELTA][r%3])}:{element:"whitespace"}}var u=i.get(c);return u?{element:"series",series:u,period:b.b.CURRENT}:{element:"whitespace"}}function E(e){return e.splits.getSplit(0)}var w=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s)),Object(l.a)(Object(i.a)(e),"state",{scrollTop:0}),Object(l.a)(Object(i.a)(e),"setScrollTop",(function(t){return e.setState({scrollTop:t})})),Object(l.a)(Object(i.a)(e),"handleClick",(function(t,n,a){var r=e.calculatePosition(t,n,a);switch(r.element){case"dimension":e.setSortToDimension(r.dimension);break;case"series":e.setSortToSeries(r.series,r.period)}})),e}return Object(r.a)(n,[{key:"getIdealColumnWidth",value:function(){var e=this.props,t=e.stage,n=e.segmentWidth,a=e.essence,r=t.width-d.g-n,i=Object(v.a)(a);return i*d.c>=r?d.c:r/i}},{key:"setSortToSeries",value:function(e,t){var n=new p.b({reference:e.key(),period:t,direction:p.c.descending});this.setSort(n)}},{key:"setSortToDimension",value:function(e){var t=new p.a({reference:e.name,direction:p.c.descending});this.setSort(t)}},{key:"setSort",value:function(e){var t=this.props,n=t.clicker,a=t.essence,r=a.splits,i=E(a),s=i.sort.equals(e)?e.set("direction",p.c.ascending):e;n.changeSplits(r.replace(i,i.changeSort(s)),f.b.KeepAlways)}},{key:"calculatePosition",value:function(e,t,n){var a=this.props,r=a.segmentWidth,i=a.essence;switch(n){case"top-left-corner":return function(e,t,n){var a=n/t.splits.length(),r=Math.floor(e/a),i=t.splits.getSplit(r),s=Object(g.d)(t.dataCube.dimensions,i.reference);return s?{element:"dimension",dimension:s}:{element:"whitespace"}}(e,i,r);case"top-gutter":return O(e,i,r,this.getIdealColumnWidth());default:return{element:"whitespace"}}}},{key:"render",value:function(){var e=this.props.children,t=this.state.scrollTop;return u.a.createElement(u.a.Fragment,null,e({columnWidth:this.getIdealColumnWidth(),scrollTop:t,handleClick:this.handleClick,setScrollTop:this.setScrollTop}))}}]),n}(u.a.Component),j=n(24),S=n(80),k=n(241),R=n(711),C=n(717),W=n(709),N=n(716),T=n(705),I=n(706),x=n(672),V=n(719);function P(e){return 0===e.__nest}var A=function(e){var t=e.splits,n=e.datum,a=e.timezone;return P(n)?u.a.createElement("div",{key:"totals",className:"flattened-split-value"},"Total"):u.a.createElement(V.a,{splits:t,datum:n,timezone:a})},D=function(e){var t=e.essence,n=e.data,a=e.scrollTop,r=e.segmentWidth,i=e.setScrollTop,s=e.setSegmentWidth,c=e.handleClick,l=e.columnWidth,o=e.stage,m=e.availableWidth,h=Object(x.a)(n.flatten({order:"preorder",nestingName:"__nest"})),f=Object(T.a)(t,h.filter(Object(j.b)(P))),p=h.length,g=Object(I.a)(p,o.height,a),b=Object(v.a)(t),y=m||d.f,O=E(t).sort,w={bodyWidth:l*b+d.h,bodyHeight:p*d.e,bottom:0,left:r,right:0,top:d.a},V=t.dataCube,D=t.splits;return u.a.createElement(u.a.Fragment,null,u.a.createElement(S.c,{direction:S.a.LEFT,onResize:s,min:d.f,max:y,value:r}),u.a.createElement(k.a,{layout:w,onScroll:i,onClick:c,topGutter:u.a.createElement(R.a,{cellWidth:l,series:t.getConcreteSeries().toArray(),sort:O,showPrevious:t.hasComparison()}),leftGutter:u.a.createElement(N.a,{visibleRowsIndexRange:g,data:h,splitLabel:function(e){var n=e.datum;return u.a.createElement(A,{splits:t.splits.splits,timezone:t.timezone,datum:n})},segmentWidth:r,highlightedRowIndex:null}),topLeftCorner:u.a.createElement(C.a,{dataCube:V,sort:O,splits:D}),body:h&&u.a.createElement(W.a,{visibleRowsIndexRange:g,essence:t,highlightedRowIndex:null,scales:f,data:h,showBarPredicate:Object(j.b)(P),cellWidth:l,rowWidth:l*b})}))},K=n(696),L=n(48),F=n(18),U=n(683),M=n(8),B=n(34),z=n(141),G=n(52),_=n(264),q=n(690),J=n(691),H=n(692),Q=n(693),X=function(e){var t=e.essence,n=e.split,a=e.dimension;return n.equals(E(t))?u.a.createElement(Z,e):Object(L.e)(a)?u.a.createElement(Y,e):null},Y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s)),Object(l.a)(Object(i.a)(e),"state",{granularity:Object(z.f)(e.props.split.bucket)}),Object(l.a)(Object(i.a)(e),"saveGranularity",(function(t){return e.setState({granularity:t})})),Object(l.a)(Object(i.a)(e),"saveSplit",(function(){var t=e.props,n=t.split;(0,t.saveSplit)(n,e.createSplit())})),e}return Object(r.a)(n,[{key:"createSplit",value:function(){var e=this.props,t=e.split,n=e.dimension,a=this.state.granularity;return Object(Q.b)({split:t,dimension:n,granularity:a})}},{key:"validate",value:function(){var e=this.props,t=e.dimension,n=e.split,a=this.state.granularity;return Object(Q.c)({split:n,dimension:t,granularity:a})}},{key:"render",value:function(){var e=this.props,t=e.containerStage,n=e.dimension,a=e.onClose,r=e.openOn,i=this.state.granularity;return u.a.createElement(Q.a,{openOn:r,containerStage:t,onClose:a,onSave:this.saveSplit,dimension:n,isValid:this.validate()},u.a.createElement(q.a,{dimension:n,granularity:i,granularityChange:this.saveGranularity}))}}]),n}(u.a.Component),Z=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s)),Object(l.a)(Object(i.a)(e),"state",e.initState()),Object(l.a)(Object(i.a)(e),"saveGranularity",(function(t){return e.setState({granularity:t})})),Object(l.a)(Object(i.a)(e),"saveSort",(function(t){return e.setState({sort:t})})),Object(l.a)(Object(i.a)(e),"saveLimit",(function(t){return e.setState({limit:t})})),Object(l.a)(Object(i.a)(e),"saveSplit",(function(){var t=e.props,n=t.split;(0,t.saveSplit)(n,e.createSplit())})),e}return Object(r.a)(n,[{key:"initState",value:function(){var e=this.props.split,t=e.bucket;return{sort:e.sort,limit:e.limit,granularity:t&&Object(z.f)(t)}}},{key:"createSplit",value:function(){var e=this.props,t=e.split,n=e.dimension,a=this.state,r=a.limit,i=a.sort,s=a.granularity;return Object(Q.b)({split:t,dimension:n,limit:r,sort:i,granularity:s})}},{key:"validate",value:function(){var e=this.props,t=e.dimension,n=e.split,a=this.state,r=a.limit,i=a.sort,s=a.granularity;return Object(Q.c)({split:n,dimension:t,limit:r,sort:i,granularity:s})}},{key:"render",value:function(){var e=this.props,t=e.containerStage,n=e.dimension,a=e.onClose,r=e.essence,i=e.openOn,s=this.state,c=s.granularity,l=s.sort,o=s.limit,d=r.dataCube.dimensions,m=[].concat(Object(B.a)(r.splits.splits.toArray().map((function(e){var t=e.reference;return new G.a(Object(g.d)(d,t))}))),Object(B.a)(r.seriesSortOns(!0).toArray()));return u.a.createElement(Q.a,{openOn:i,containerStage:t,onClose:a,onSave:this.saveSplit,dimension:n,isValid:this.validate()},u.a.createElement(q.a,{dimension:n,granularity:c,granularityChange:this.saveGranularity}),u.a.createElement(H.a,{direction:l.direction,selected:G.c.fromSort(l,r),options:m,onChange:this.saveSort}),u.a.createElement(J.a,{selectedLimit:o,limits:_.a,includeNone:!1,onLimitSelect:this.saveLimit}))}}]),n}(u.a.Component),$=function(e){var t=e.essence,a=e.open,r=e.split,i=e.dimension,s=e.style,c=e.removeSplit,l=e.updateSplit,o=e.openMenu,d=e.closeMenu,m=e.dragStart,h=e.containerStage,f=r.equals(E(t))||Object(L.e)(i),p=r.getTitle(i),v=function(e){e.stopPropagation(),c(r)},g=function(){f&&o(r)};return u.a.createElement(U.a,null,(function(e){var c=e.ref,o=e.setRef;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:Object(M.b)("tile dimension",{disabled:!f}),key:r.toKey(),ref:o,draggable:!0,onClick:g,onDragStart:function(e){return m(i.title,r,e)},style:s,title:p},u.a.createElement("div",{className:"reading"},p),u.a.createElement("div",{className:"remove",onClick:v},u.a.createElement(F.a,{svg:n(194)}))),f&&a&&c&&u.a.createElement(X,{saveSplit:l,essence:t,openOn:c,containerStage:h,onClose:d,dimension:i,split:r}))}))};function ee(e){return u.a.createElement(K.b,Object.assign({},e,{splitTileComponent:$}))}var te=function(e){return u.a.createElement(h.c,Object.assign({},e,{splitTilesRow:ee}))},ne=function(e){var t=e.essence,n=e.segmentWidth,a=e.setSegmentWidth,r=e.stage,i=e.clicker,s=e.data,c=r.width-d.d;return u.a.createElement("div",{className:"grid-container"},u.a.createElement(w,{essence:t,clicker:i,stage:r,segmentWidth:n},(function(e){var i=e.columnWidth,l=e.scrollTop,o=e.setScrollTop,d=e.handleClick;return u.a.createElement(D,{essence:t,data:s,stage:r,handleClick:d,setScrollTop:o,setSegmentWidth:a,availableWidth:c,columnWidth:i,segmentWidth:n,scrollTop:l})})))},ae=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s)),Object(l.a)(Object(i.a)(e),"state",{segmentWidth:d.f}),Object(l.a)(Object(i.a)(e),"setSegmentWidth",(function(t){e.setState({segmentWidth:t})})),e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state.segmentWidth;return u.a.createElement(u.a.Fragment,null,u.a.createElement(te,this.props),u.a.createElement(h.a,Object.assign({},this.props,{chartComponent:Object(m.a)(ne,{segmentWidth:e,setSegmentWidth:this.setSegmentWidth})})))}}]),n}(u.a.Component)}}]);
//# sourceMappingURL=grid.ed28c8879cf025c74f34.js.map