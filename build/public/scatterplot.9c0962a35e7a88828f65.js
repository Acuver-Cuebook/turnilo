(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{480:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return u}));var n=a(18),r=a(6);const c=e=>e.data[0],l=e=>e[r.l],s=e=>e.data,i=Object(n.c)(l,s),o=Object(n.c)(c,l),u=Object(n.c)(o,s)},483:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),c=a(3);const l=({title:e})=>{const t=Object(c.a)(8*e.length,80,300);return r.a.createElement("div",{className:"title",style:{minWidth:t}},e)}},487:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),r=a.n(n),c=a(19),l=a(490);const s=e=>{const{series:t,datum:a,showPrevious:n}=e;if(!n)return r.a.createElement(r.a.Fragment,null,t.formatValue(a));const s=t.selectValue(a),i=t.selectValue(a,c.b.PREVIOUS),o=t.formatter();return r.a.createElement(l.a,{lowerIsBetter:t.measure.lowerIsBetter,formatter:o,current:s,previous:i})}},489:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var n=a(0),r=a.n(n),c=a(84),l=a(483),s=a(163);const i=e=>{const{left:t,top:a,title:n,content:l}=e;return r.a.createElement(c.a,{left:t,top:a+-10},r.a.createElement("div",{className:"segment-bubble"},r.a.createElement(o,{title:n,content:l}),r.a.createElement(s.a,{direction:"up"})))},o=({title:e,content:t})=>r.a.createElement("div",{className:"segment-bubble-text"},r.a.createElement(l.a,{title:e}),t?r.a.createElement("div",{className:"content"},t):null)},490:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),c=a(484);const l=({lowerIsBetter:e,formatter:t,current:a,previous:n})=>{const l=t(a),s=t(n);return r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",{className:"current-value"},l),r.a.createElement("span",{className:"previous-value"},s),r.a.createElement(c.a,{formatter:t,currentValue:a,previousValue:n,lowerIsBetter:e}))}},493:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),c=a(3);const l=e=>{const{orientation:t,stage:a,ticks:n,scale:l}=e;return r.a.createElement("g",{className:Object(c.b)("grid-lines",t),transform:a.getTransform()},n.map(e=>{const n=Object(c.k)(l(e)),s=function(e,t,a){switch(e){case"horizontal":return{x1:0,x2:a.width,y1:t,y2:t};case"vertical":return{x1:t,x2:t,y1:0,y2:a.height}}}(t,n,a);return r.a.createElement("line",Object.assign({key:String(e)},s))}))}},520:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1),r=a(0),c=a.n(r);function l(e,t){const{top:a,left:n,stage:r,margin:c=10}=e;if(!t){return{top:a+c,left:n+c}}const l=r.y+r.height,s=r.x+r.width;return{top:t.bottom>l?a-c-t.height:t.top<r.y?a+t.height:a+c,left:t.right>s?n-c-t.width:t.left<r.x?n+t.width:n+c}}class s extends c.a.Component{constructor(...e){super(...e),Object(n.a)(this,"self",c.a.createRef()),Object(n.a)(this,"state",{})}componentDidMount(){this.setState({rect:this.self.current.getBoundingClientRect()})}render(){const{children:e}=this.props;return c.a.createElement("div",{className:"tooltip-within-stage",style:l(this.props,this.state.rect),ref:this.self},e)}}},526:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n);const c=({title:e,width:t=100,height:a=200,formatter:n,colorScale:c})=>{const[l,s]=c.domain();if(isNaN(l)||isNaN(s))return null;const i=a-10-5,[o,u]=c.range();return r.a.createElement("div",{className:"color-legend"},r.a.createElement("div",{className:"color-legend-header"},e),r.a.createElement("div",{className:"color-legend-stripe"},r.a.createElement("svg",{className:"color-legend",width:t+"px",height:a+"px"},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"color-stripe",gradientTransform:"rotate(90)"},r.a.createElement("stop",{offset:"0%",stopColor:u}),r.a.createElement("stop",{offset:"10%",stopColor:u}),r.a.createElement("stop",{offset:"90%",stopColor:o}),r.a.createElement("stop",{offset:"100%",stopColor:o}))),r.a.createElement("g",{transform:"translate(5, 10)"},r.a.createElement("rect",{className:"color-legend-stripe",x:0,y:0,width:30,height:i,fill:"url(#color-stripe)"}),r.a.createElement("line",{className:"color-legend-stripe-axis",x1:.5,x2:.5,y1:0,y2:i}),r.a.createElement("g",{className:"color-upper-bound"},r.a.createElement("line",{className:"color-upper-bound-tick",x1:0,x2:35,y1:.5,y2:.5}),r.a.createElement("text",{className:"color-upper-bound-value",x:37,y:4},n(s))),r.a.createElement("g",{className:"color-lower-bound"},r.a.createElement("line",{className:"color-lower-bound-tick",x1:0,x2:35,y1:i+.5,y2:i+.5}),r.a.createElement("text",{className:"color-lower-bound-value",x:37,y:i+4},n(l)))))))}},579:function(e,t,a){"use strict";a.r(t),a.d(t,"Scatterplot",(function(){return T})),a.d(t,"default",(function(){return J}));var n=a(112),r=a(0),c=a.n(r),l=a(493),s=a(485),i=a(82),o=a(18),u=a(526),m=a(166);const f=({xBinCount:e,yBinCount:t,xScale:a,yScale:n,stage:r,data:l,xSeries:s,ySeries:f})=>{const h=i.l().domain(a.domain()).range(Object(o.n)(0,e)),d=i.l().domain(n.domain()).range(Object(o.n)(0,t)),x=function({xBinCount:e,yBinCount:t,xSeries:a,ySeries:n,xQuantile:r,yQuantile:c,data:l}){const s=Array.from({length:e},()=>Array.from({length:t},()=>0));return l.forEach(e=>{const t=r(a.selectValue(e)),l=c(n.selectValue(e));s[t][l]+=1}),s}({xBinCount:e,yBinCount:t,data:l,xQuantile:h,xSeries:s,yQuantile:d,ySeries:f}),y=[0,i.f(x,e=>i.f(e))],E=i.k().domain(y).range(["#fff","#90b5d0"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,null,c.a.createElement(u.a,{title:"Count per summary bin",formatter:e=>e.toString(10),colorScale:E})),c.a.createElement("g",{transform:r.getTransform(),className:"heatmap"},x.map((e,t)=>e.map((e,r)=>c.a.createElement(g,{key:`key-${t}-${r}`,xScale:a,yScale:n,fillColor:E(e),xRange:h.invertExtent(t),yRange:d.invertExtent(r)})))))};const g=({xRange:e,yRange:t,xScale:a,yScale:n,fillColor:r})=>{const[l,s]=e,[i,o]=t,u=a(l),m=a(s)-u,f=n(o),g=n(i)-f;return c.a.createElement("rect",{fill:r,x:u,width:m,y:f,height:g})};var h=a(165),d=a(115);const x=({datum:e,xScale:t,yScale:a,xSeries:n,ySeries:r,setHover:l,resetHover:s})=>{const{customization:{visualizationColors:i}}=Object(d.b)(),o=n.selectValue(e),u=r.selectValue(e),m=i.main,f=Object(h.c)(i);return c.a.createElement(c.a.Fragment,null,c.a.createElement("circle",{cx:t(o),cy:a(u),r:3,className:"point",stroke:m,fill:f}),c.a.createElement("circle",{onMouseEnter:()=>l(e),onMouseLeave:()=>s(),cx:t(o),cy:a(u),r:6,stroke:"none",fill:"transparent"}))};var y=a(9),E=a(489),p=a(487),S=a(520);const b=({datum:e,stage:t,xSeries:a,ySeries:n,xScale:r,yScale:l,split:s,timezone:i,showPrevious:o})=>{if(!Object(y.o)(e))return null;const u=r(a.selectValue(e))+100,m=l(n.selectValue(e))+50;return c.a.createElement(S.a,{top:m,left:u,stage:t},c.a.createElement(E.b,{title:s.formatValue(e,i),content:c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",{className:"series-title"},a.title()),c.a.createElement("br",null),c.a.createElement(p.a,{datum:e,showPrevious:o,series:a}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("strong",{className:"series-title"},n.title()),c.a.createElement("br",null),c.a.createElement(p.a,{datum:e,showPrevious:o,series:n}))}))};var v=a(26),w=a(480);function k(e,t,a){const[n,r]=t.getConcreteSeries().toArray(),c=Object(w.c)(e),l=N(c,n),s=N(c,r),o=function(e){const t=e.width/e.height;return t<=1?function(e){return v.a.fromJS({x:90,y:40,width:e.width-50-80,height:e.width-50-80})}(e):t>=2?function(e){return v.a.fromJS({x:90,y:40,width:e.height-50-80,height:e.height-50-80})}(e):function(e){return v.a.fromJS({x:90,y:40,width:e.width-50-80,height:e.height-50-80})}(e)}(a),u=i.k().domain(s).nice().range([o.height,0]),m=i.k().domain(l).nice().range([0,o.width]),f=m.ticks(10),g=u.ticks(10);return{xSeries:n,ySeries:r,xScale:m,yScale:u,xTicks:f,yTicks:g,plottingStage:o,scatterplotData:c}}function N(e,t){return function(e){const[t,a]=e;if(t!==a)return e;return[t-.05*t,a+.05*a]}(i.b(e,e=>t.selectValue(e)))}function O(e,t){return t>768?e:e.filter((e,t)=>t%2==0)}function j(e){return v.a.fromJS({x:90,y:e.height+40,width:e.width,height:50})}function C(e){return v.a.fromJS({x:40,y:40,width:50,height:e.height})}var V=a(3);const B=({stage:e,ticks:t,scale:a,formatter:n,tickSize:r})=>{const l=r+16,s=Object(V.k)(0),i=t.map(e=>{const t=Object(V.k)(a(e));return c.a.createElement("line",{className:"tick",key:String(e),x1:t,y1:0,x2:t,y2:r})}),o=t.map(e=>{const t=a(e);return c.a.createElement("text",{className:"label axis-label-x",key:String(e),x:t,y:l},n(e))});return c.a.createElement("g",{className:"axis axis-x",transform:e.getTransform()},i,o,c.a.createElement("line",{className:"border",y1:s,y2:s,x1:0,x2:e.width}))},z=({formatter:e,stage:t,tickSize:a,ticks:n,scale:r})=>{const l=Object(V.k)(t.width),s=n.map(e=>{const n=Object(V.k)(r(e));return c.a.createElement("line",{className:"tick",key:String(e),x1:t.width-a,y1:n,x2:t.width,y2:n})}),i=n.map(t=>{const a=r(t)+4;return c.a.createElement("text",{className:"label",key:String(t),x:0,y:a},e(t))});return c.a.createElement("g",{className:"axis axis-y",transform:t.getTransform()},c.a.createElement("line",{className:"border",x1:l,y1:0,x2:l,y2:t.height}),s,i)},T=({data:e,essence:t,stage:a})=>{const[s,i]=Object(r.useState)(null),o=Object(n.a)(k),u=Object(r.useCallback)(e=>i(e),[i]),m=Object(r.useCallback)(()=>i(null),[i]),g=t.splits.splits.first(),h=t.visualizationSettings.showSummary,{xTicks:d,yTicks:y,xScale:E,yScale:p,xSeries:S,ySeries:v,plottingStage:w,scatterplotData:N}=o(e,t,a),V=function(e,t){const a=e.width-(t.width+t.x);return{bottom:e.height-(t.height+t.y-55),right:a}}(a,w);return c.a.createElement("div",{className:"scatterplot-container",style:a.getWidthHeight()},c.a.createElement("span",{className:"axis-title axis-title-y",style:{top:10,left:10}},v.title()),c.a.createElement("span",{className:"axis-title axis-title-x",style:{bottom:V.bottom,right:V.right}},S.title()),c.a.createElement(b,{datum:s,stage:w,ySeries:v,xSeries:S,yScale:p,xScale:E,split:g,timezone:t.timezone,showPrevious:t.hasComparison()}),c.a.createElement("svg",{viewBox:a.getViewBox()},h&&c.a.createElement(f,{stage:w,data:N,xBinCount:d.length-1,yBinCount:y.length-1,xScale:E,xSeries:S,yScale:p,ySeries:v}),c.a.createElement(l.a,{orientation:"vertical",stage:w,ticks:d,scale:E}),c.a.createElement(l.a,{orientation:"horizontal",stage:w,ticks:y,scale:p}),c.a.createElement(B,{scale:E,stage:j(w),ticks:O(d,w.width),formatter:S.formatter(),tickSize:10}),c.a.createElement(z,{stage:C(w),ticks:O(y,w.height),tickSize:10,scale:p,formatter:v.formatter()}),c.a.createElement("g",{transform:w.getTransform()},N.map(e=>c.a.createElement(x,{key:"point-"+g.selectValue(e),datum:e,xScale:E,yScale:p,xSeries:S,ySeries:v,setHover:u,resetHover:m})))))};function J(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.b,e),c.a.createElement(s.a,Object.assign({},e,{chartComponent:T})))}}}]);
//# sourceMappingURL=scatterplot.9c0962a35e7a88828f65.js.map